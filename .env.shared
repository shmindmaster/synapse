# ======================================================
# DigitalOcean Shared Infrastructure - Synapse
# ======================================================
# REPO_NAME=Synapse
# REPO_SLUG=synapse
#
# IMPORTANT: This file contains PLACEHOLDERS only.
# Replace <PLACEHOLDER_*> values with actual secrets.
# DO NOT commit this file with real secrets.
# ======================================================

# ======================================================
# 1. APP IDENTITY
# ======================================================
APP_SLUG=synapse
APP_ENV=prod
APP_PUBLIC_HOST=synapse.shtrial.com
APP_API_HOST=api.synapse.shtrial.com

# ======================================================
# 2. DATABASE (PostgreSQL on DigitalOcean Managed Database)
# Cluster: sh-shared-postgres (shared cluster, per-repo DB)
# ======================================================

# Public connection (for local development)
# NOTE: Database name "Synapse" must be created in sh-shared-postgres cluster
DATABASE_URL="postgresql://doadmin:<DB_PASSWORD>@sh-shared-postgres-do-user-XXXX.f.db.ondigitalocean.com:25060/Synapse?sslmode=require"

# Private connection (for App Platform deployments)
DATABASE_URL_PRIVATE="postgresql://doadmin:<DB_PASSWORD>@private-sh-shared-postgres-do-user-XXXX.f.db.ondigitalocean.com:25060/Synapse?sslmode=require"

DB_HOST=sh-shared-postgres-do-user-XXXX.f.db.ondigitalocean.com
DB_HOST_PRIVATE=private-sh-shared-postgres-do-user-XXXX.f.db.ondigitalocean.com
DB_PORT=25060
DB_USER=doadmin
DB_PASSWORD=<DB_PASSWORD>
DB_SSL_MODE=require

# Instructions:
# 1. In the sh-shared-postgres cluster:
#    CREATE DATABASE "Synapse";
#    \c Synapse
#    CREATE EXTENSION IF NOT EXISTS vector;
# 2. Ensure Prisma points to DATABASE_URL / DATABASE_URL_PRIVATE.
# 3. Run: pnpm --filter @synapse/backend db:generate
# 4. Run: pnpm --filter @synapse/backend db:migrate

# ======================================================
# 3. DIGITALOCEAN SPACES (S3-compatible Object Storage)
# ======================================================

DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com
DO_SPACES_BUCKET=synapse
DO_SPACES_KEY=<SPACES_ACCESS_KEY>
DO_SPACES_SECRET=<SPACES_SECRET_KEY>
DO_SPACES_REGION=nyc3
DO_SPACES_CDN_ENDPOINT=https://synapse.nyc3.cdn.digitaloceanspaces.com

# Public CDN URL (for frontend use)
NEXT_PUBLIC_CDN_BASE_URL=https://synapse.nyc3.cdn.digitaloceanspaces.com

# ======================================================
# 4. DIGITALOCEAN GRADIENT AI PLATFORM
# ======================================================

# Inference Endpoint (OpenAI-compatible)
DIGITALOCEAN_INFERENCE_ENDPOINT=https://inference.do-ai.run/v1
AI_PROVIDER=digitalocean

# Model Configuration
AI_MODEL_CORE=llama-3.1-70b-instruct
AI_MODEL_EMBEDDING=text-embedding-3-small

# Gradient AI API Key (Secret Key)
DIGITALOCEAN_MODEL_KEY=<GRADIENT_MODEL_KEY>

# Legacy Model Names (for compatibility)
AZURE_OPENAI_CHAT_DEPLOYMENT=llama-3.1-70b-instruct
AZURE_OPENAI_EMBED_DEPLOYMENT=text-embedding-3-small

# ======================================================
# 5. DIGITALOCEAN API TOKEN (for infrastructure management)
# ======================================================

DIGITALOCEAN_API_TOKEN=<DIGITALOCEAN_API_TOKEN>

# ======================================================
# 6. RESOURCE METADATA
# ======================================================

SH_ORG_PREFIX=sh
SH_REGION=nyc3
SH_DB_CLUSTER_NAME=sh-shared-postgres

# ======================================================
# 7. APP PLATFORM SERVICE NAMING
# ======================================================
# Frontend Service: synapse-frontend
# Backend Service: synapse-backend
# ======================================================
