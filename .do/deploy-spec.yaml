name: synapse
region: nyc
domains:
- domain: synapse.shtrial.com
  type: PRIMARY
services:
- name: web
  dockerfile_path: Dockerfile
  source_dir: /
  github:
    repo: shmindmaster/Synapse
    branch: main
    deploy_on_push: true
  instance_count: 1
  instance_size_slug: basic-xxs
  http_port: 3000
  routes:
  - path: /
  health_check:
    http_path: /api/health
    initial_delay_seconds: 30
    period_seconds: 30
  envs:
  - key: NODE_ENV
    value: production
  - key: PORT
    value: "3000"
  - key: DATABASE_URL
    value: "postgresql://doadmin:AVNS_YjWXReTbi5Epp6MzXjq@private-sh-shared-postgres-do-user-29516566-0.f.db.ondigitalocean.com:25060/Synapse?sslmode=require"
    type: SECRET
  - key: DIGITALOCEAN_INFERENCE_ENDPOINT
    value: "https://inference.do-ai.run/v1"
  - key: DIGITALOCEAN_MODEL_KEY
    value: "sk-do-uthd1l4FYE-EUeITacHO9LHOFFJnHdVNdio21yT07SwyDyg3yIa0ip4dOa"
    type: SECRET
  - key: AI_MODEL
    value: "llama-3.1-70b-instruct"
  - key: AI_MODEL_EMBEDDING
    value: "text-embedding-3-small"
  - key: DO_SPACES_ENDPOINT
    value: "https://nyc3.digitaloceanspaces.com"
  - key: DO_SPACES_BUCKET
    value: "synapse"
  - key: DO_SPACES_KEY
    value: "DO00LMB24WZXVCMK6G22"
    type: SECRET
  - key: DO_SPACES_SECRET
    value: "iF+p6XAKezSNNCKsIB3f0XGS+6/gmDE+8VPZCyyBU1o"
    type: SECRET
  - key: DO_SPACES_REGION
    value: "nyc3"
  - key: DO_SPACES_CDN_ENDPOINT
    value: "https://synapse.nyc3.cdn.digitaloceanspaces.com"
